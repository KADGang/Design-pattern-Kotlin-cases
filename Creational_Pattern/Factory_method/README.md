# 工厂模式
### **假装有介绍**

这里是创建型模式里第一个介绍的设计模式，工厂模式。

***工厂，也叫制造厂或生产工厂是一个工业场所，通常是由几个充满机器的建筑物组成的综合体，在那里工人制造产品或操作机器将每个产品加工成另一个产品。它们是现代经济生产的重要组成部分，世界上大多数商品都是在工厂里制造或加工的。***

***——摘自维基百科关于“工厂”一词的释义***

那么从上面这段来自维基百科的释义来说，其实也不难理解工厂模式本质上的作用也就是进行代码中所需对象的生产和加工。这里有一个初学设计模式可能会感到困惑的点：既然我需要创建一个对象，那我何必去实现一个工厂模式，不能直接去new一个所需要的对象呢？

***

### **关于黑暗料理带师也想吃到甜甜的甜品这档子事**

如果您今天想要吃点甜的东西，比如说泡芙。那么如果恰好您厨艺高超，那当然可以自己购买原材料，然后经过烘培来自产自销。那如果隔天想吃马卡龙，那您就得再去商场买制作马卡龙的材料，然后再查找攻略去制作马卡龙了。但是不巧的是您正好是一个黑暗料理带师，这下怎么办噢？

您突然发现大街上分别有一家泡芙专卖店和一家马卡龙专卖店了，那么现在在您想吃泡芙或者是马卡龙的时候，就可以直接跑去专卖店里购买即可，完全不用纠结适量盐或是糖少许具体是多少这样的制作细节了。这时候，即使您是一位黑暗料理泰斗，也可以完全从工厂（泡芙和马卡龙专卖店）里面拿到自己心仪的甜品进行享用了。

那么在这个例子中不难看出，作为工厂模式的甜品专卖店的出现，使得在我们需要使用产品（甜品）的时候并不需要了解产品的创建逻辑（甜品的制作方法）。工厂只需要会返回产品（售卖甜品）这样一个行为，我们就可以很方便的去获得我们具体需要的产品（具体到今天吃什么）了。

***

### **存在的意义**

在实际的开发中，如果我们碰到无法准确预知到我们所需要的对象的具体类以及依赖关系的时候（不知道吃什么也是人类一大难题），那不妨试试工厂模式。工厂方法封装了生产产品的代码，并将其与使用产品的代码分离。如果突然需要在开发中加入新的产品，则只需要开发新的产品子类并重写其工厂方法即可，并不需要过度修改使用产品的具体逻辑。

拿上面的例子来说，如果您突然想吃蛋挞了，那您只需要找到方便的蛋挞店，然后让它卖给您蛋挞（相当于调用工厂方法）即可。

***

### **实现方式**

1. 首先需要让所有的产品遵循同一个接口，这个接口里必须声明所有产品都需要或有可能执行的方法。

2. 为每种产品设计一个子类，并实现产品的接口。

3. 声明一个工厂方法，并在这里定义生产各产品的条件，并在这里写下生产具体产品的代码，使得在各种情况下都能返回正确类型的产品对象。

4. 在使用产品的代码中，只需要通过调用工厂方法即可。

***

### **可能存在的问题**

如果你的产品种类过大，那么在实现第三步的时候，工厂方法的代码中可能存在大量分支语句。而且新加入一种产品，就需要相应的产品子类和工厂方法，可能会导致代码结构更加复杂。不过其他的创建者模式可能会使得这些问题得到缓解。